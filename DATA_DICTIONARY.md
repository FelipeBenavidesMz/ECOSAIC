# Data Dictionary — ECOSAIC Workflow

This document describes all input and output files used across the three scripts, including column names, units, and descriptions.

---

 # Variable name mapping: internal code → descriptive English label (internal name → readable English label)    

# ── Biogeochemical — Physicochemical sub-group ──────────────────
    'Phosphate':            'Phosphate',
    'Iron':                 'Iron',
    'Light_bottom':         'Light at bottom',
    'Nitrate':              'Nitrate',
    'Dissolved_oxygen':     'Dissolved oxygen',
    'pH':                   'pH',
    'Salinity':             'Salinity',
    'Silicate':             'Silicate',
    'Temperature':          'Temperature',
    'P_a_r':                'Photosynthetically active radiation',
    'Organic_matter':       'Organic matter',

# ── Biogeochemical — Biological sub-group ───────────────────────

    'Chlorophyll':          'Chlorophyll',
    'Phytoplankton':        'Phytoplankton',
    'Utilized_oxygen':      'Utilized oxygen',
    'Primary_productivity': 'Primary productivity',

# ── Hydrogeomorphological ───────────────────────────────────────
    'Aspect':               'Aspect',
    'Eastness':             'Eastness',
    'River_influence':      'River influence',
    'Currents_velocity':    'Currents velocity',
    'Runoff':               'Runoff',
    'Wind_v':               '10 m v-component of wind',
    'Land_distance':        'Land distance',
    'L_t_m':                'Local terrain mean',
    'Northness':            'Northness',
    'R_d_m_v':              'Relative difference to the mean value',
    'Slope':                'Slope',
    'Stde':                 'Standard deviation of depth',
    'Superficie':           'Surface area',
    'Hardness':             'Hardness',
    'Particle_size':        'Particle size',
    'E_l_d':                'Euphotic layer depth',
    'D_a_c':                'Diffuse attenuation coefficient',
    'R_i_m_b':              'Radial influence of mangrove biomass',

## Input Files

### `species_occurrences.csv`
Species occurrence records used for habitat validation.

| Column | Type | Description |
|--------|------|-------------|
| `scientific_name` | character | Binomial species name (Genus_species) |
| `class` | character | Taxonomic class |
| `order` | character | Taxonomic order |
| `family` | character | Taxonomic family |
| `genus` | character | Taxonomic genus |
| `longitude` | numeric | Decimal longitude (WGS84) |
| `latitude` | numeric | Decimal latitude (WGS84) |

---

### `species_environmental_preferences_literature.csv`
Environmental tolerance ranges compiled from published literature for each species.

| Column | Type | Description |
|--------|------|-------------|
| `scientific_name` | character | Binomial species name (Genus_species) |
| `Temp_lit` | character | Temperature tolerance range from literature (°C), format `[min-max]` |
| `Sal_lit` | character | Salinity tolerance range from literature (PSU), format `[min-max]` |
| `Prof_lit` | character | Depth range from literature (m), format `[min-max]` |

---

## Intermediate and Output Files

### `LE_DUAL_OPTIMIZED_<timestamp>.csv`
Generated by **Script 1 (ECOSAIC.R)**. Pixel-level table with latent features and original environmental variables.

| Column | Type | Description |
|--------|------|-------------|
| `longitude` | numeric | Decimal longitude (WGS84) |
| `latitude` | numeric | Decimal latitude (WGS84) |
| `LE1_FisicoBio_OPTIMIZED` | numeric | Latent feature 1 — physico-biological axis |
| `LE2_Hidro_OPTIMIZED` | numeric | Latent feature 2 — hydrogeomorphological axis |
| *(input env. variables)* | numeric | Original environmental raster values per pixel |

---

### `ECOSAIC_LatentFeatures_EnvVariables_SOMclass_ColombianPacific.csv`
Generated by **Script 2 (SOM_benthic_habitat_classification.R)**. Full pixel-level table used by the Shiny app.

| Column | Type | Description |
|--------|------|-------------|
| `longitude` | numeric | Decimal longitude (WGS84) |
| `latitude` | numeric | Decimal latitude (WGS84) |
| `LE1_FisicoBio_norm` | numeric | Normalised LE1 (scaled) |
| `LE2_Hidro_norm` | numeric | Normalised LE2 (scaled) |
| `som_opt.unit.classif` | integer | SOM cluster ID (1–16 for a 4×4 grid) |
| `Temperature` | numeric | Mean sea temperature (°C) |
| `Salinity` | numeric | Mean salinity (PSU) |
| `L_t_m` | numeric | Local terrain mean — bathymetry proxy (m, negative = depth) |
| *(additional env. variables)* | numeric | Other environmental variables included at model training |

---

### `ECOSAIC_SOM_BenthicHabitats_ColombianPacific_LE1LE2_4x4_WGS84.tif`
Generated by **Script 2**. Single-band raster with SOM cluster ID per pixel, projected in WGS84.

---

### `species_occurrences_with_cluster.csv`
Generated by **Script 2**. Species occurrence table with the SOM cluster ID assigned to each record based on spatial intersection with the habitat raster.

| Column | Type | Description |
|--------|------|-------------|
| *(all columns from `species_occurrences.csv`)* | — | Original occurrence fields |
| `cluster` | integer | SOM cluster ID at the occurrence location (`NA` if outside raster extent) |

---

## Notes

- All spatial data use the **WGS84 geographic coordinate system** (EPSG:4326) at the output stage. Intermediate processing uses EPSG:3115 (Colombian Pacific projected CRS).
- The SOM grid used in the published analysis is **4×4 (16 clusters)**. Grid size can be modified in Script 2.
- Species with fewer than **10 independent occurrence records** are excluded from biological validation analyses in the Shiny app.
